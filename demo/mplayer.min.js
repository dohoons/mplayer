/**
 * MPlayer : HTML5 Media Player
 * @author dohoons(dohoons@gmail.com)
 * @version v0.2.4-alpha.2
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MPlayer=t():e.MPlayer=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";e.exports=a;var r=n(11),i=n(12),o=Array.prototype;function a(e){if(!(this instanceof a))return new a(e);var t,n=i(e.className).split(/\s+/);for(this._elem=e,this.length=0,t=0;t<n.length;t+=1)n[t]&&o.push.call(this,n[t])}a.prototype.add=function(){var e,t;for(t=0;t<arguments.length;t+=1)e=""+arguments[t],r(this,e)>=0||o.push.call(this,e);return this._elem.className=this.toString(),this},a.prototype.remove=function(){var e,t,n;for(n=0;n<arguments.length;n+=1)t=""+arguments[n],(e=r(this,t))<0||o.splice.call(this,e,1);return this._elem.className=this.toString(),this},a.prototype.contains=function(e){return r(this,e+="")>=0},a.prototype.toggle=function(e,t){return e+="",!0===t?this.add(e):!1===t?this.remove(e):this[this.contains(e)?"remove":"add"](e)},a.prototype.toString=function(){return o.join.call(this," ")}},function(e,t,n){"use strict";var r=n(2),i=[{title:"MPlayer 정보",action:function(){window.open("https://github.com/dohoons/mplayer")}},{title:"단축키 안내",action:function(){alert("재생/일시정지 : space\n전체화면 보기/해제 : F\n앞으로/뒤로 : 왼쪽/오른쪽 방향키\n볼륨조정 : 위/아래 방향키")}},{title:"재생속도",action:function(){},group:[{title:"0.5x",action:function(){this.playbackRate=.5}},{title:"1.0x",action:function(){this.playbackRate=1}},{title:"1.5x",action:function(){this.playbackRate=1.5}},{title:"2.0x",action:function(){this.playbackRate=2}}]}],o=navigator.userAgent,a=/iPad|iPhone|iPod/.test(o),u=/iPad/.test(o),l=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled||document.mozFullScreenEnabled,s=(0,r.getCurrentScriptPath)();e.exports={DEFAULT_OPTIONS:{skin:"basic",flexible:!1,width:"",height:"",currentTime:0,autoplay:!1,loop:!1,muted:!1,volume:1,playbackRate:1,preload:"metadata",contextmenu:!0,event:{}},DEFAULT_CONTEXT_MENU:i,UA:o,IOS:a,IPAD:u,SUPPORT_FS:l,FSCHANGE_EVENT_LIST:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],ELEMENT_EVENT_LIST:["abort","canplay","canplaythrough","durationchange","emptied","error","ended","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],SCRIPT_PATH:s}},function(e,t,n){"use strict";e.exports.sec2str=function(e){var t=parseInt(e),n=Math.floor(t/86400),r=("0"+Math.floor(t/3600)%24).slice(-2),i=("0"+Math.floor(t/60)%60).slice(-2),o=("0"+t%60).slice(-2);return(n>0?n+"d ":"")+(r>0?r+":":"")+i+":"+(t>60?o:o+"")},e.exports.getMatchAttr=function(e,t){for(var n=e.attributes,r=n.length;r--;)if(0===n[r].nodeName.indexOf(t))return{nodeName:n[r].nodeName,name:n[r].nodeName.split(t)[1],value:n[r].value};return null},e.exports.closest=function(e,t){for(var n=e.webkitMatchesSelector?"webkitMatchesSelector":e.msMatchesSelector?"msMatchesSelector":"matches";e.parentElement;){if(e[n](t))return e;e=e.parentElement}return null},e.exports.getCurrentScriptPath=function(){var e=void 0;if(document.currentScript)e=document.currentScript.src;else{var t=document.getElementsByTagName("script");e=t[t.length-1].src}return e.substring(0,e.lastIndexOf("/"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(0)),o=n(1),a=(u(n(4)),u(n(6)),u(n(13)));function u(e){return e&&e.__esModule?e:{default:e}}var l=window.MPlayerSkinList={},s=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t,this.player.ui={},this}return r(e,[{key:"loadInterface",value:function(e){var t=this,n=this.player,r=n.isVideo?"video":"audio",i=document.createElement("script"),a=o.SCRIPT_PATH+"/skin/"+n.opt.skin;if(i.src=a+"/tpl."+r+".js",n.el.parentNode.insertBefore(i,n.el),0===document.querySelectorAll('link[href*="'+a+'"]').length){var u=document.createElement("link");u.setAttribute("rel","stylesheet"),u.setAttribute("href",a+"/skin.min.css"),document.body.appendChild(u)}"function"==typeof e&&i.addEventListener("load",function(){e.call(t,l[n.opt.skin+"-"+r])})}},{key:"createInterface",value:function(e){var t=this.player,n=t.el,r=t.ui,u=document.createElement("div");n.parentNode.removeChild(n.previousElementSibling),n.parentNode.insertBefore(u,n),u.outerHTML=e,r.container=n.previousElementSibling,r.container.querySelector(".mp-media-el").appendChild(n),(0,i.default)(n).add("el"),n.controls=!1,n.setAttribute("playsinline",""),n.setAttribute("tabindex","0"),o.UA.indexOf("MSIE 9")>-1&&(0,i.default)(r.container).add("mp-is-ie9"),o.IOS&&(0,i.default)(r.container).add("mp-is-ios"),t.opt.contextmenu&&(r.contextmenu=new a.default(o.DEFAULT_CONTEXT_MENU,t))}},{key:"removeInterface",value:function(){var e=this.player,t=e.ui;e.el=e.prevEl,t.container.parentNode.replaceChild(e.el,t.container),t=null}},{key:"applyPlayerOption",value:function(){var e=this.player,t=e.el,n=e.opt;for(var r in n.event)e.on(r,n.event[r]);t.muted=n.muted,e.ui.volume.position=t.muted?0:n.volume/1*100,t.playbackRate=n.playbackRate,t.loop=n.loop,t.preload=n.preload,0===n.currentTime||isNaN(t.duration)||(e.currentTime=n.currentTime),n.autoplay&&e.play()}},{key:"eventInit",value:function(){this.player.events.on()}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(0)),a=n(1),u=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(t){s(this,e),this.player=t}return i(e,[{key:"progressOnDrag",value:function(e){this.player.el.duration&&(this.player.el.currentTime=this.player.el.duration/100*e)}},{key:"volumeOnDrag",value:function(e){this.player.el.volume=e/100}},{key:"btnPlay",value:function(){this.player.play()}},{key:"btnPause",value:function(){this.player.pause()}},{key:"btnPlayPause",value:function(){this.player.togglePlay()}},{key:"btnStop",value:function(){this.player.stop()}},{key:"videoClick",value:function(){this.player.togglePlay(),this.player.el.focus()}},{key:"posterClick",value:function(){this.player.play(),this.player.el.focus()}},{key:"btnToggleMute",value:function(){this.player.toggleMute()}},{key:"volumeBar",value:function(){this.player.el.muted=!1}}]),e}(),p=function(e){function t(e){s(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.uiEvents=new c(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),i(t,[{key:"play",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this),(0,o.default)(this.player.ui.poster).add("mp-hide")}},{key:"timeupdate",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"timeupdate",this).call(this,e),(0,o.default)(this.player.ui.poster).add("mp-hide")}},{key:"FSButtonHandler",value:function(){var e=this.player.ui.container,t=this.player.ui.btnFullscreen;if(a.SUPPORT_FS){var n=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;if(!1===Boolean(n)){var r=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen;r&&r.call(e)}else{var i=document.exitFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen;i&&i.call(document)}}else a.IOS&&!a.IPAD?(this.player.el.pause(),this.player.el.removeAttribute("playsinline"),this.player.el.play()):(0,o.default)(e).contains("mp-is-fullscreen")?((0,o.default)(e).remove("mp-is-fullscreen"),(0,o.default)(t).remove("mp-is-fullscreen"),t.innerHTML=t.getAttribute("data-first-text")):((0,o.default)(e).add("mp-is-fullscreen"),(0,o.default)(t).add("mp-is-fullscreen"),t.innerHTML=t.getAttribute("data-second-text"))}},{key:"FSChangeHandler",value:function(){var e=this.player.ui.container,t=this.player.ui.btnFullscreen,n=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;!1===Boolean(n)&&((0,o.default)(e).remove("mp-is-fullscreen"),(0,o.default)(t).remove("mp-is-fullscreen"),t.innerHTML=t.getAttribute("data-first-text")),!0===Boolean(n)&&n==e&&((0,o.default)(e).add("mp-is-fullscreen"),(0,o.default)(t).add("mp-is-fullscreen"),t.innerHTML=t.getAttribute("data-second-text"))}},{key:"on",value:function(){var e=this,n=this.player,i=n.el,o=n.ui;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"on",this).call(this),o.progress&&(o.progress.onDrag=this.uiEvents.progressOnDrag.bind(this)),o.volume&&(o.volume.onDrag=this.uiEvents.volumeOnDrag.bind(this)),o.btnPlay&&o.btnPlay.addEventListener("click",this.uiEvents.btnPlay.bind(this),!1),o.btnPause&&o.btnPause.addEventListener("click",this.uiEvents.btnPause.bind(this),!1),o.btnPlayPause&&o.btnPlayPause.addEventListener("click",this.uiEvents.btnPlayPause.bind(this),!1),o.btnStop&&o.btnStop.addEventListener("click",this.uiEvents.btnStop.bind(this),!1),o.poster&&o.poster.addEventListener("click",this.uiEvents.posterClick.bind(this),!1),o.videoWrap&&o.videoWrap.addEventListener("click",this.uiEvents.videoClick.bind(this),!1),o.btnMute&&o.btnMute.addEventListener("click",this.uiEvents.btnToggleMute.bind(this),!1),o.volumeBar&&o.volumeBar.addEventListener("mousedown",this.uiEvents.volumeBar.bind(this),!1),o.btnFullscreen&&o.btnFullscreen.addEventListener("click",this.FSButtonHandler.bind(this),!1),a.SUPPORT_FS?a.FSCHANGE_EVENT_LIST.forEach(function(t){return document.addEventListener(t,e.FSChangeHandler.bind(e),!1)}):a.IOS&&i.addEventListener("webkitbeginfullscreen",function(){i.setAttribute("playsinline","")},!1)}},{key:"off",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"off",this).call(this),a.SUPPORT_FS&&a.FSCHANGE_EVENT_LIST.forEach(function(t){return document.removeEventListener(t,e.FSChangeHandler.bind(e),!1)})}}]),t}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=(r=o)&&r.__esModule?r:{default:r},u=n(1),l=n(2);var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t}return i(e,[{key:"on",value:function(){var e=this,t=this.player.ui.container;u.ELEMENT_EVENT_LIST.forEach(function(t){return e.player.el.addEventListener(t,e[t].bind(e),!1)}),[].forEach.call(t.querySelectorAll("a, button, input, [tabindex]"),function(t){t.addEventListener("focus",function(){return(0,a.default)(e.player.ui.container).add("mp-is-focus")}),t.addEventListener("focus",e.activeFocus.bind(e)),t.addEventListener("blur",function(){return(0,a.default)(e.player.ui.container).remove("mp-is-focus")})}),t.addEventListener("mousemove",this.active.bind(this),!1),t.addEventListener("touchmove",this.active.bind(this),!1),t.addEventListener("touchstart",this.active.bind(this),!1),t.addEventListener("mouseout",function(){return(0,a.default)(t).remove("mp-is-active")},!1),t.addEventListener("contextmenu",this.contextmenu.bind(this),!1),clearInterval(t.sizeTimer),t.sizeTimer=setInterval(this.updateSizeOption.bind(this),50),window.addEventListener("keydown",this.keydown.bind(this),!1)}},{key:"off",value:function(){var e=this;u.ELEMENT_EVENT_LIST.forEach(function(t){return e.player.el.removeEventListener(t,e[t].bind(e),!1)}),clearInterval(this.player.ui.container.sizeTimer),window.removeEventListener("keydown",this.keydown.bind(this),!1)}},{key:"callback",value:function(e,t){var n=this,r=void 0,i=void 0;"string"==typeof e?(r=e,i=t):(r=e.type,i=e),this.player.userEvents.forEach(function(e){e.eventName===r&&e.handler.call(n.player,i)})}},{key:"updateBuffered",value:function(){var e=this.player.el,t=this.player.ui.buffered,n=0,r=e.buffered,i=e.currentTime,o=(e.duration,0),a=0;try{for(;!(r.start(n)<=i&&i<=r.end(n));)n+=1;o=r.start(n)/e.duration*100,a=r.end(n)/e.duration*100-o,t.style.width=a+"%",t.style.left=o+"%"}catch(e){}}},{key:"updatePlayState",value:function(){var e=this.player,t=e.el,n=e.ui.btnPlayPause,r=e.ui.currentTime,i=e.ui.totalTime,o=e.ui.btnMute;n&&(t.paused?((0,a.default)(n).remove("mp-is-paused"),n.innerHTML=n.getAttribute("data-first-text")):((0,a.default)(n).add("mp-is-paused"),n.innerHTML=n.getAttribute("data-second-text"))),t.paused?(0,a.default)(e.ui.container).remove("mp-is-playing"):(0,a.default)(e.ui.container).add("mp-is-playing"),r&&(e.ui.currentTime.innerHTML=(0,l.sec2str)(t.currentTime)),i&&(e.ui.totalTime.innerHTML=(0,l.sec2str)(t.duration)),o&&(t.muted?((0,a.default)(o).add("mp-is-muted"),o.innerHTML=o.getAttribute("data-second-text")):((0,a.default)(o).remove("mp-is-muted"),o.innerHTML=o.getAttribute("data-first-text")))}},{key:"updateSizeOption",value:function(){var e=this.player.ui.container,t=(0,l.getMatchAttr)(e,"data-maxwidth-"),n=(0,l.getMatchAttr)(e,"data-minwidth-"),r=0;null!==t&&(r=parseInt(t.name),e.offsetWidth<=r?(0,a.default)(e).add(t.value):(0,a.default)(e).remove(t.value)),null!==n&&(r=parseInt(n.name),e.offsetWidth>=r?(0,a.default)(e).add(n.value):(0,a.default)(e).remove(n.value))}},{key:"active",value:function(){var e=this.player.ui.container;(0,a.default)(e).remove("mp-is-active-focus"),(0,a.default)(e).add("mp-is-active"),clearTimeout(e.activeTimer),e.activeTimer=setTimeout(function(){return(0,a.default)(e).remove("mp-is-active")},2e3)}},{key:"activeFocus",value:function(){var e=this.player.ui.container;(0,a.default)(e).remove("mp-is-active"),(0,a.default)(e).add("mp-is-active-focus"),clearTimeout(e.activeTimer),e.activeTimer=setTimeout(function(){return(0,a.default)(e).remove("mp-is-active-focus")},2e3)}},{key:"contextmenu",value:function(e){e.preventDefault(),this.player.opt.contextmenu&&this.player.ui.contextmenu.show(e),this.callback(e)}},{key:"keydown",value:function(e){var t=this.player;if((0,a.default)(t.ui.container).contains("mp-is-focus"))switch(e.keyCode){case 32:e.preventDefault(),t.togglePlay();break;case 70:t.ui.btnFullscreen&&this.FSButtonHandler.call(this);break;case 37:e.preventDefault(),t.currentTime-=5;break;case 39:e.preventDefault(),t.currentTime+=5;break;case 38:e.preventDefault(),t.volume+=.05;break;case 40:e.preventDefault(),t.volume-=.05}}},{key:"abort",value:function(e){this.callback(e)}},{key:"canplay",value:function(e){this.callback(e)}},{key:"canplaythrough",value:function(e){this.updateBuffered(),this.callback(e)}},{key:"durationchange",value:function(e){this.callback(e)}},{key:"emptied",value:function(e){this.callback(e)}},{key:"ended",value:function(e){this.callback(e)}},{key:"error",value:function(e){this.callback(e)}},{key:"loadeddata",value:function(e){this.updateBuffered(),this.callback(e)}},{key:"loadedmetadata",value:function(e){this.player.wrapper.applyPlayerOption(),this.updatePlayState(),this.updateSizeOption(),this.callback(e)}},{key:"loadstart",value:function(e){this.callback(e)}},{key:"pause",value:function(e){this.updatePlayState(),this.callback(e)}},{key:"play",value:function(){this.updatePlayState(),this.callback("play")}},{key:"playing",value:function(e){this.updateBuffered(),this.callback(e)}},{key:"progress",value:function(e){this.updateBuffered(),this.callback(e)}},{key:"ratechange",value:function(e){this.callback(e)}},{key:"seeked",value:function(e){var t=this;clearTimeout(this.player.ui.container.seekTimer),this.player.ui.container.seekTimer=setTimeout(function(){return(0,a.default)(t.player.ui.container).remove("mp-is-seeking")},800),this.callback(e)}},{key:"seeking",value:function(e){(0,a.default)(this.player.ui.container).add("mp-is-seeking"),this.callback(e)}},{key:"stalled",value:function(e){this.callback(e)}},{key:"suspend",value:function(e){this.callback(e)}},{key:"timeupdate",value:function(e){!1===this.player.ui.progress.isDown&&(this.player.ui.progress.position=this.player.el.currentTime/this.player.el.duration*100),this.updatePlayState(),this.callback(e)}},{key:"volumechange",value:function(e){this.player.ui.volume.position=this.player.el.muted?0:this.player.el.volume/1*100,this.updatePlayState(),this.callback(e)}},{key:"waiting",value:function(e){this.callback(e)}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5),a=(r=o)&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(t){u(this,e),this.player=t}return i(e,[{key:"progressOnDrag",value:function(e){this.player.el.duration&&(this.player.el.currentTime=this.player.el.duration/100*e)}},{key:"volumeOnDrag",value:function(e){this.player.el.volume=e/100}},{key:"btnPlay",value:function(){this.player.play()}},{key:"btnPause",value:function(){this.player.pause()}},{key:"btnPlayPause",value:function(){this.player.togglePlay()}},{key:"btnStop",value:function(){this.player.stop()}},{key:"btnToggleMute",value:function(){this.player.toggleMute()}},{key:"volumeBar",value:function(){this.player.el.muted=!1}}]),e}(),s=function(e){function t(e){u(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.uiEvents=new l(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"on",value:function(){var e=this.player,n=(e.el,e.ui);(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"on",this).call(this),n.progress&&(n.progress.onDrag=this.uiEvents.progressOnDrag.bind(this)),n.volume&&(n.volume.onDrag=this.uiEvents.volumeOnDrag.bind(this)),n.btnPlay&&n.btnPlay.addEventListener("click",this.uiEvents.btnPlay.bind(this),!1),n.btnPause&&n.btnPause.addEventListener("click",this.uiEvents.btnPause.bind(this),!1),n.btnPlayPause&&n.btnPlayPause.addEventListener("click",this.uiEvents.btnPlayPause.bind(this),!1),n.btnStop&&n.btnStop.addEventListener("click",this.uiEvents.btnStop.bind(this),!1),n.btnMute&&n.btnMute.addEventListener("click",this.uiEvents.btnToggleMute.bind(this),!1),n.volumeBar&&n.volumeBar.addEventListener("mousedown",this.uiEvents.volumeBar.bind(this),!1)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.el,r=t.onDrag,i=t.axis,o=void 0===i?"x":i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.range=n,this.dragger=this.range.children[0],this.onDrag=r,this.isX="x"===o,this.isDown=!1,this.range.addEventListener("mousedown",this.mousedown.bind(this)),document.addEventListener("mousemove",this.update.bind(this)),document.addEventListener("mouseup",this.mouseup.bind(this)),this.range.addEventListener("touchstart",this.mousedown.bind(this)),document.addEventListener("touchmove",this.update.bind(this)),document.addEventListener("touchend",this.mouseup.bind(this)),this}return r(e,[{key:"mousedown",value:function(e){e.preventDefault(),e.stopPropagation(),this.isDown=!0,this.update(e)}},{key:"update",value:function(e){var t=e.touches?this.isX?e.touches[0].pageX:e.touches[0].pageY:this.isX?e.pageX:e.pageY,n=t>=this.offsetPos&&t<=this.offsetPos+this.rangeSize,r=t-this.offsetPos,i=0;this.isDown&&n&&(i=this.isX?Math.round(r/this.rangeSize*100):Math.round((this.rangeSize-r)/this.rangeSize*100),this.position=i,"function"==typeof this.onDrag&&this.onDrag.call(this,this.position))}},{key:"mouseup",value:function(){this.isDown=!1}},{key:"position",get:function(){var e=this.isX?"width":"height";return Math.round(parseInt(this.dragger.style[e]))},set:function(e){var t=this.isX?"width":"height";this.dragger.style[t]=e+"%"}},{key:"rangeSize",get:function(){return this.isX?this.range.offsetWidth:this.range.offsetHeight}},{key:"offsetPos",get:function(){var e=this.range,t=0;if(e&&e.offsetParent)for(;e;)this.isX?t+=e.offsetLeft:t+=e.offsetTop,e=e.offsetParent;return t}}]),e}();t.default=i},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=s(n(9)),u=s(n(10)),l=s(n(14));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=r({},o.DEFAULT_OPTIONS);return i.opt=r(a,n),i.el="string"==typeof e?document.querySelector(e):e,i.prevEl=i.el.cloneNode(!0),i.isVideo="VIDEO"===i.el.tagName,i.wrapper=i.isVideo?new u.default(i):new l.default(i),i.initFlag=!1,i.userEvents=[],i.init(),c(i,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"init",value:function(e){var t=this;return this.destroy(),this.opt=r(this.opt,e),this.wrapper.loadInterface(function(e){t.wrapper.createInterface(e),t.wrapper.eventInit(),t.el.load()}),this.initFlag=!0,this}},{key:"destroy",value:function(){return this.initFlag&&(this.wrapper.removeInterface(),this.events.off(),this.initFlag=!1),this}},{key:"on",value:function(e,t){return this.userEvents.push({eventName:e,handler:t}),this}},{key:"off",value:function(e){var t=[];return this.userEvents.forEach(function(n){n.eventName!==e&&t.push(n)}),this.userEvents=t,this}}]),t}();e.exports=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"play",value:function(){return this.el.play(),this}},{key:"pause",value:function(){return this.el.pause(),this}},{key:"togglePlay",value:function(){return this.el.paused?this.el.play():this.el.pause(),this}},{key:"stop",value:function(){return this.pause(),this.el.currentTime=0,this}},{key:"toggleMute",value:function(){return this.el.muted=!this.el.muted,this.ui.volume.position=this.el.muted?0:this.el.volume/1*100,this}},{key:"src",get:function(){return this.el.currentSrc},set:function(e){this.el.src=e}},{key:"volume",get:function(){return this.el.volume},set:function(e){e>1&&(e=1),e<0&&(e=0),this.el.volume=e}},{key:"currentTime",get:function(){return this.el.currentTime},set:function(e){this.el.currentTime=e}},{key:"playbackRate",get:function(){return this.el.playbackRate},set:function(e){this.el.playbackRate=e}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),a=s(n(3)),u=s(n(7)),l=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.player.events=new l.default(n.player),c(n,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"createInterface",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createInterface",this).call(this,e);var n=this.player,i=n.el,a=n.opt,l=n.ui.container,s=l.querySelector(".mp-poster"),c=i.getAttribute("poster"),p=l.querySelector(".mp-progress"),f=l.querySelector(".mp-volume"),d=new u.default({el:p}),h=new u.default({el:f});if(c&&""!==c?s.setAttribute("style","background-image: url("+c+");"):l.removeChild(s),!a.width&&i.hasAttribute("width")){var y=i.getAttribute("width");a.width=y.indexOf("%")>-1?y:y+"px"}if(!a.height&&i.hasAttribute("height")){var v=i.getAttribute("height");a.height=v.indexOf("%")>-1?v:v+"px"}a.width&&(l.style.width=a.width),a.height&&(l.style.height=a.height),a.flexible&&(0,o.default)(l).add("mp-is-flexible"),n.ui=r(n.ui,{poster:s,videoWrap:l.querySelector(".mp-media-el"),progressBar:p,buffered:p.querySelector(".mp-buffered"),volumeBar:f,progress:d,volume:h,currentTime:l.querySelector(".mp-current-time"),totalTime:l.querySelector(".mp-total-time"),btnPlay:l.querySelector(".mp-btn-play"),btnPause:l.querySelector(".mp-btn-pause"),btnPlayPause:l.querySelector(".mp-btn-play-puase"),btnStop:l.querySelector(".mp-btn-stop"),btnFullscreen:l.querySelector(".mp-btn-fullscreen"),btnMute:l.querySelector(".mp-btn-mute")})}}]),t}();t.default=p},function(e,t){e.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=(r=o)&&r.__esModule?r:{default:r},u=n(2);var l=function(){function e(t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=t,this.player=n,this.el=null,this.events=[],this.init(t),this}return i(e,[{key:"init",value:function(e){this.items=e,this.events=[],this.el=document.createElement("div"),this.el.setAttribute("class","mplayer-context-menu"),this.el.setAttribute("tabindex","0"),this.el.innerHTML="\n\t\t\t\n<style>\n.mplayer-context-menu { line-height: 1.2; font-family: 'Malgun Gothic', 'dotum', sans-serif; font-size: 12px; color: #fff; background: rgba(0,0,0,.85); outline: none; position: absolute; z-index: 99999999; }\n.mplayer-context-main { margin: 0; padding: 0; list-style: none; }\n.mplayer-context-sub { display: none; margin: 0; padding: 0; background: rgba(0,0,0,.85); list-style: none; border: 1px solid #000; position: absolute; top: 0; left: 100%; }\n.mplayer-context-dir-left .mplayer-context-sub { left: auto; right: 100%; }\n.mplayer-context-dir-top .mplayer-context-sub { top: auto; bottom: 0; }\n.mplayer-context-item { position: relative; }\n.mplayer-context-item:not(:first-child) > .mplayer-context-link { border-top: 1px solid rgba(255,255,255,.2); }\n.mplayer-context-item:hover > .mplayer-context-sub { display: block; }\n.mplayer-context-link { -webkit-box-sizing: border-box; box-sizing: border-box; display: block; min-width: 100px; max-width: 250px; padding: 8px 15px; color: #fff; text-decoration: none; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }\n.mplayer-context-link:hover,\n.mplayer-context-link:focus { background-color: rgba(255,255,255,.2); }\n.mplayer-context-sub .mplayer-context-link { min-width: auto; }\n</style>\n\n\t\t\t<ul class=\"mplayer-context-main\">"+this.createTree(this.items)+"</ul>\n\t\t",this.applyEvent()}},{key:"createTree",value:function(e){for(var t="",n=0,r=e.length;n<r;++n)this.events.push(e[n].action),t+='\n\t\t\t\t<li class="mplayer-context-item">\n\t\t\t\t\t<a href="#" class="mplayer-context-link" onclick="event.preventDefault();">'+e[n].title+"</a>\n\t\t\t\t\t"+(e[n].group?'<ul class="mplayer-context-sub">'+this.createTree(e[n].group)+"</ul>":"")+"\t\t\n\t\t\t\t</li>\n\t\t\t";return t}},{key:"applyEvent",value:function(){for(var e=this.el.querySelectorAll(".mplayer-context-link"),t=0,n=e.length;t<n;++t)e[t].addEventListener("click",this.events[t].bind(this.player),!1)}},{key:"show",value:function(e){this.hide(),window.addEventListener("click",this.hide,!1),window.addEventListener("contextmenu",this.hide,!1),window.addEventListener("resize",this.hide,!1),document.body.appendChild(this.el),this.position(e),this.el.focus()}},{key:"hide",value:function(e){if(e&&"contextmenu"===e.type&&(0,u.closest)(e.target,".mplayer"))return!1;for(var t=document.querySelectorAll(".mplayer-context-menu"),n=0,r=t.length;n<r;++n)document.body.removeChild(t[n]);window.removeEventListener("click",this.hide,!1),window.removeEventListener("contextmenu",this.hide,!1),window.removeEventListener("resize",this.hide,!1)}},{key:"position",value:function(e){var t=this.el,n=document.documentElement.clientWidth||document.body.clientWidth,r=document.documentElement.clientHeight||document.body.clientHeight,i=window.pageYOffset,o=window.pageXOffset,u=r-t.offsetHeight+i,l=n-t.offsetWidth+o,s=e.clientY+i,c=e.clientX+o;c>=l&&((0,a.default)(this.el).add("mplayer-context-dir-left"),c=l),s>=u&&((0,a.default)(this.el).add("mplayer-context-dir-top"),s=u),t.style.top=s+"px",t.style.left=c+"px"}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(3)),a=l(n(7)),u=l(n(6));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.player.events=new u.default(n.player),s(n,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"createInterface",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createInterface",this).call(this,e);var n=this.player,i=(n.el,n.opt,n.ui.container),o=i.querySelector(".mp-progress"),u=i.querySelector(".mp-volume"),l=new a.default({el:o}),s=new a.default({el:u});n.ui=r(n.ui,{progressBar:o,buffered:o.querySelector(".mp-buffered"),volumeBar:u,progress:l,volume:s,currentTime:i.querySelector(".mp-current-time"),totalTime:i.querySelector(".mp-total-time"),btnPlay:i.querySelector(".mp-btn-play"),btnPause:i.querySelector(".mp-btn-pause"),btnPlayPause:i.querySelector(".mp-btn-play-puase"),btnStop:i.querySelector(".mp-btn-stop"),btnFullscreen:i.querySelector(".mp-btn-fullscreen"),btnMute:i.querySelector(".mp-btn-mute")})}}]),t}();t.default=c}])});