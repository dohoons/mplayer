/**
 * MPlayer : HTML5 Media Player
 * @author dohoons(dohoons@gmail.com)
 * @version v0.2.3-alpha.3
 * @license MIT
 */
!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(1);var u=n(2),c=n(4),p=i(c),f=n(5),d=i(f),h=n(12),y=i(h),v=function(e){function t(e,n){var i;r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),l=s({},u.DEFAULT_OPTIONS);return a.opt=s(l,n),a.el="string"==typeof e?document.querySelector(e):e,a.prevEl=a.el.cloneNode(!0),a.isVideo="VIDEO"===a.el.tagName,a.wrapper=a.isVideo?new d.default(a):new y.default(a),a.initFlag=!1,a.userEvents=[],a.init(),i=a,o(a,i)}return a(t,e),l(t,[{key:"init",value:function(e){var t=this;return this.destroy(),this.opt=s(this.opt,e),this.wrapper.loadInterface(function(e){t.wrapper.createInterface(e),t.wrapper.eventInit(),t.el.load()}),this.initFlag=!0,this}},{key:"destroy",value:function(){return this.initFlag&&(this.wrapper.removeInterface(),this.events.off(),this.initFlag=!1),this}},{key:"on",value:function(e,t){return this.userEvents.push({eventName:e,handler:t}),this}},{key:"off",value:function(e){var t=[];return this.userEvents.forEach(function(n){n.eventName!==e&&t.push(n)}),this.userEvents=t,this}}]),t}(p.default);e[u.PUBLIC_NAMESPACE]=v,t.default=v}).call(t,function(){return this}())},function(e,t){"use strict";"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,i=arguments.length;for(n=0;n<i;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}():!function(e){if("Element"in e){var t="classList",n="prototype",i=e.Element[n],r=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},u=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,r=n.length;i<r;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},c=u[n]=[],p=function(){return new u(this)};if(s[n]=Error[n],c.item=function(e){return this[e]||null},c.contains=function(e){return e+="",l(this,e)!==-1},c.add=function(){var e,t=arguments,n=0,i=t.length,r=!1;do e=t[n]+"",l(this,e)===-1&&(this.push(e),r=!0);while(++n<i);r&&this._updateClassName()},c.remove=function(){var e,t,n=arguments,i=0,r=n.length,o=!1;do for(e=n[i]+"",t=l(this,e);t!==-1;)this.splice(t,1),o=!0,t=l(this,e);while(++i<r);o&&this._updateClassName()},c.toggle=function(e,t){e+="";var n=this.contains(e),i=n?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!n},c.toString=function(){return this.join(" ")},r.defineProperty){var f={get:p,enumerable:!0,configurable:!0};try{r.defineProperty(i,t,f)}catch(e){e.number===-2146823252&&(f.enumerable=!1,r.defineProperty(i,t,f))}}else r[n].__defineGetter__&&i.__defineGetter__(t,p)}}(self))},function(e,t,n){"use strict";var i=n(3),r={skin:"basic",flexible:!1,width:"",height:"",currentTime:0,autoplay:!1,loop:!1,muted:!1,volume:1,playbackRate:1,preload:"metadata",contextmenu:!0,event:{}},o=[{title:"MPlayer 정보",action:function(){window.open("https://github.com/dohoons/mplayer")}},{title:"단축키 안내",action:function(){alert("재생/일시정지 : space\n전체화면 보기/해제 : F\n앞으로/뒤로 : 왼쪽/오른쪽 방향키\n볼륨조정 : 위/아래 방향키")}},{title:"재생속도",action:function(){},group:[{title:"0.5x",action:function(){this.playbackRate=.5}},{title:"1.0x",action:function(){this.playbackRate=1}},{title:"1.5x",action:function(){this.playbackRate=1.5}},{title:"2.0x",action:function(){this.playbackRate=2}}]}],a="MPlayer",s=navigator.userAgent,l=/iPad|iPhone|iPod/.test(s),u=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled||document.mozFullScreenEnabled,c=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],p=["abort","canplay","canplaythrough","durationchange","emptied","error","ended","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],f=(0,i.getCurrentScriptPath)();e.exports={DEFAULT_OPTIONS:r,DEFAULT_CONTEXT_MENU:o,PUBLIC_NAMESPACE:a,UA:s,IOS:l,SUPPORT_FS:u,FSCHANGE_EVENT_LIST:c,ELEMENT_EVENT_LIST:p,SCRIPT_PATH:f}},function(e,t){"use strict";e.exports.sec2str=function(e){var t=parseInt(e),n=Math.floor(t/86400),i=("0"+Math.floor(t/3600)%24).slice(-2),r=("0"+Math.floor(t/60)%60).slice(-2),o=("0"+t%60).slice(-2);return(n>0?n+"d ":"")+(i>0?i+":":"")+(r+":")+(t>60?o:o+"")},e.exports.getMatchAttr=function(e,t){for(var n=e.attributes,i=n.length;i--;)if(0===n[i].nodeName.indexOf(t))return{nodeName:n[i].nodeName,name:n[i].nodeName.split(t)[1],value:n[i].value};return null},e.exports.closest=function(e,t){for(var n=e.webkitMatchesSelector?"webkitMatchesSelector":e.msMatchesSelector?"msMatchesSelector":"matches";e.parentElement;){if(e[n](t))return e;e=e.parentElement}return null},e.exports.getCurrentScriptPath=function(){var e=void 0;if(document.currentScript)e=document.currentScript.src;else{var t=document.getElementsByTagName("script");e=t[t.length-1].src}return e.substring(0,e.lastIndexOf("/"))}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e)}return i(e,[{key:"play",value:function(){return this.el.play(),this}},{key:"pause",value:function(){return this.el.pause(),this}},{key:"togglePlay",value:function(){return this.el.paused?this.el.play():this.el.pause(),this}},{key:"stop",value:function(){return this.pause(),this.el.currentTime=0,this}},{key:"toggleMute",value:function(){return this.el.muted=!this.el.muted,this.ui.volume.position=this.el.muted?0:this.el.volume/1*100,this}},{key:"src",get:function(){return this.el.currentSrc},set:function(e){this.el.src=e}},{key:"volume",get:function(){return this.el.volume},set:function(e){e>1&&(e=1),e<0&&(e=0),this.el.volume=e}},{key:"currentTime",get:function(){return this.el.currentTime},set:function(e){this.el.currentTime=e}},{key:"playbackRate",get:function(){return this.el.playbackRate},set:function(e){this.el.playbackRate=e}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=n(6),p=i(c),f=n(11),d=i(f),h=n(7),y=i(h),v=function(e){function t(e){var n;r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.player.events=new y.default(i.player),n=i,o(i,n)}return a(t,e),l(t,[{key:"createInterface",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createInterface",this).call(this,e);var n=this.player,i=n.el,r=n.opt,o=n.ui.container,a=o.querySelector(".mp-poster"),l=i.getAttribute("poster"),c=o.querySelector(".mp-progress"),p=o.querySelector(".mp-volume"),f=new d.default({el:c}),h=new d.default({el:p});l&&""!==l?a.setAttribute("style","background-image: url("+l+");"):o.removeChild(a),(r.flexible||r.width||r.height)&&(o.classList.add("mp-is-flexible"),r.width&&(o.style.width=r.width),r.height&&(o.style.height=r.height)),n.ui=s(n.ui,{poster:a,videoWrap:o.querySelector(".mp-media-el"),progressBar:c,buffered:c.querySelector(".mp-buffered"),volumeBar:p,progress:f,volume:h,currentTime:o.querySelector(".mp-current-time"),totalTime:o.querySelector(".mp-total-time"),btnPlay:o.querySelector(".mp-btn-play"),btnPause:o.querySelector(".mp-btn-pause"),btnPlayPause:o.querySelector(".mp-btn-play-puase"),btnStop:o.querySelector(".mp-btn-stop"),btnFullscreen:o.querySelector(".mp-btn-fullscreen"),btnMute:o.querySelector(".mp-btn-mute")})}}]),t}(p.default);t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),s=n(7),l=(i(s),n(9)),u=(i(l),n(10)),c=i(u),p=window.MPlayerSkinList={},f=function(){function e(t){return r(this,e),this.player=t,this.player.ui={},this}return o(e,[{key:"loadInterface",value:function(e){var t=this,n=this.player,i=n.isVideo?"video":"audio",r=document.createElement("script"),o=a.SCRIPT_PATH+"/skin/"+n.opt.skin;if(r.src=o+"/tpl."+i+".js",n.el.parentNode.insertBefore(r,n.el),0===document.querySelectorAll('link[href*="'+o+'"]').length){var s=document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("href",o+"/skin.min.css"),document.body.appendChild(s)}"function"==typeof e&&r.addEventListener("load",function(){e.call(t,p[n.opt.skin+"-"+i])})}},{key:"createInterface",value:function(e){var t=this.player,n=t.el,i=t.ui,r=document.createElement("div");n.parentNode.removeChild(n.previousElementSibling),n.parentNode.insertBefore(r,n),r.outerHTML=e,i.container=n.previousElementSibling,i.container.querySelector(".mp-media-el").appendChild(n),n.classList.add("el"),n.controls=!1,n.setAttribute("playsinline",""),n.setAttribute("tabindex","0"),a.UA.indexOf("MSIE 9")>-1&&i.container.classList.add("mp-is-ie9"),a.IOS&&i.container.classList.add("mp-is-ios"),t.opt.contextmenu&&(i.contextmenu=new c.default(a.DEFAULT_CONTEXT_MENU,t))}},{key:"removeInterface",value:function(){var e=this.player,t=e.ui;e.el=e.prevEl,t.container.parentNode.replaceChild(e.el,t.container),t=null}},{key:"applyPlayerOption",value:function(){var e=this.player,t=e.el,n=e.opt;for(var i in n.event)e.on(i,n.event[i]);t.muted=n.muted,e.ui.volume.position=t.muted?0:n.volume/1*100,t.playbackRate=n.playbackRate,t.loop=n.loop,t.preload=n.preload,0===n.currentTime||isNaN(t.duration)||(e.currentTime=n.currentTime),n.autoplay&&e.play()}},{key:"eventInit",value:function(){this.player.events.on()}}]),e}();t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(2),c=n(8),p=i(c),f=function(){function e(t){a(this,e),this.player=t}return l(e,[{key:"progressOnDrag",value:function(e){this.player.el.currentTime=this.player.el.duration/100*e}},{key:"volumeOnDrag",value:function(e){this.player.el.volume=e/100}},{key:"btnPlay",value:function(){this.player.play()}},{key:"btnPause",value:function(){this.player.pause()}},{key:"btnPlayPause",value:function(){this.player.togglePlay()}},{key:"btnStop",value:function(){this.player.stop()}},{key:"videoClick",value:function(){this.player.togglePlay(),this.player.el.focus()}},{key:"posterClick",value:function(){this.player.play(),this.player.el.focus()}},{key:"btnToggleMute",value:function(){this.player.toggleMute()}},{key:"volumeBar",value:function(){this.player.el.muted=!1}}]),e}(),d=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.uiEvents=new f(e),n}return o(t,e),l(t,[{key:"play",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this),this.player.ui.poster.classList.add("mp-hide")}},{key:"timeupdate",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"timeupdate",this).call(this,e),this.player.ui.poster.classList.add("mp-hide")}},{key:"FSButtonHandler",value:function(){var e=this.player.ui.container,t=this.player.ui.btnFullscreen;if(u.SUPPORT_FS){var n=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;if(Boolean(n)===!1){var i=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen;i&&i.call(e)}else{var r=document.exitFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen;r&&r.call(document)}}else u.IOS?(this.player.el.pause(),this.player.el.removeAttribute("playsinline"),this.player.el.play()):e.classList.contains("mp-is-fullscreen")?(e.classList.remove("mp-is-fullscreen"),t.classList.remove("mp-is-fullscreen"),t.innerHTML=t.getAttribute("data-first-text")):(e.classList.add("mp-is-fullscreen"),t.classList.add("mp-is-fullscreen"),t.innerHTML=t.getAttribute("data-second-text"))}},{key:"FSChangeHandler",value:function(){var e=this.player.ui.container,t=this.player.ui.btnFullscreen,n=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;Boolean(n)===!1&&(e.classList.remove("mp-is-fullscreen"),t.classList.remove("mp-is-fullscreen"),t.innerHTML=t.getAttribute("data-first-text")),Boolean(n)===!0&&n==e&&(e.classList.add("mp-is-fullscreen"),t.classList.add("mp-is-fullscreen"),t.innerHTML=t.getAttribute("data-second-text"))}},{key:"on",value:function(){var e=this,n=this.player,i=n.el,r=n.ui;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"on",this).call(this),r.progress&&(r.progress.onDrag=this.uiEvents.progressOnDrag.bind(this)),r.volume&&(r.volume.onDrag=this.uiEvents.volumeOnDrag.bind(this)),r.btnPlay&&r.btnPlay.addEventListener("click",this.uiEvents.btnPlay.bind(this),!1),r.btnPause&&r.btnPause.addEventListener("click",this.uiEvents.btnPause.bind(this),!1),r.btnPlayPause&&r.btnPlayPause.addEventListener("click",this.uiEvents.btnPlayPause.bind(this),!1),r.btnStop&&r.btnStop.addEventListener("click",this.uiEvents.btnStop.bind(this),!1),r.poster&&r.poster.addEventListener("click",this.uiEvents.posterClick.bind(this),!1),r.videoWrap&&r.videoWrap.addEventListener("click",this.uiEvents.videoClick.bind(this),!1),r.btnMute&&r.btnMute.addEventListener("click",this.uiEvents.btnToggleMute.bind(this),!1),r.volumeBar&&r.volumeBar.addEventListener("mousedown",this.uiEvents.volumeBar.bind(this),!1),r.btnFullscreen&&r.btnFullscreen.addEventListener("click",this.FSButtonHandler.bind(this),!1),u.SUPPORT_FS?u.FSCHANGE_EVENT_LIST.forEach(function(t){return document.addEventListener(t,e.FSChangeHandler.bind(e),!1)}):u.IOS&&i.addEventListener("webkitbeginfullscreen",function(){i.setAttribute("playsinline","")},!1)}},{key:"off",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"off",this).call(this),u.SUPPORT_FS&&u.FSCHANGE_EVENT_LIST.forEach(function(t){return document.removeEventListener(t,e.FSChangeHandler.bind(e),!1)})}}]),t}(p.default);t.default=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),a=n(3),s=function(){function e(t){i(this,e),this.player=t}return r(e,[{key:"on",value:function(){var e=this,t=this.player.ui.container;o.ELEMENT_EVENT_LIST.forEach(function(t){return e.player.el.addEventListener(t,e[t].bind(e),!1)}),[].forEach.call(t.querySelectorAll("a, button, input, [tabindex]"),function(t){t.addEventListener("focus",function(){return e.player.ui.container.classList.add("mp-is-focus")}),t.addEventListener("focus",e.activeFocus.bind(e)),-t.addEventListener("blur",function(){return e.player.ui.container.classList.remove("mp-is-focus")})}),t.addEventListener("mousemove",this.active.bind(this),!1),t.addEventListener("touchmove",this.active.bind(this),!1),t.addEventListener("touchstart",this.active.bind(this),!1),t.addEventListener("mouseout",function(){return t.classList.remove("mp-is-active")},!1),t.addEventListener("contextmenu",this.contextmenu.bind(this),!1),clearInterval(t.sizeTimer),t.sizeTimer=setInterval(this.updateSizeOption.bind(this),50),window.addEventListener("keydown",this.keydown.bind(this),!1)}},{key:"off",value:function(){var e=this;o.ELEMENT_EVENT_LIST.forEach(function(t){return e.player.el.removeEventListener(t,e[t].bind(e),!1)}),clearInterval(this.player.ui.container.sizeTimer),window.removeEventListener("keydown",this.keydown.bind(this),!1)}},{key:"callback",value:function(e,t){var n=this,i=void 0,r=void 0;"string"==typeof e?(i=e,r=t):(i=e.type,r=e),this.player.userEvents.forEach(function(e){e.eventName===i&&e.handler.call(n.player,r)})}},{key:"updateBuffered",value:function(){var e=this.player.el,t=this.player.ui.buffered,n=0,i=e.buffered,r=e.currentTime,o=(e.duration,0),a=0,s=0;try{for(;!(i.start(n)<=r&&r<=i.end(n));)n+=1;o=i.start(n)/e.duration*100,a=i.end(n)/e.duration*100,s=a-o,t.style.width=s+"%",t.style.left=o+"%"}catch(e){}}},{key:"updatePlayState",value:function(){var e=this.player,t=e.el,n=e.ui.btnPlayPause,i=e.ui.currentTime,r=e.ui.totalTime,o=e.ui.btnMute;n&&(t.paused?(n.classList.remove("mp-is-paused"),n.innerHTML=n.getAttribute("data-first-text")):(n.classList.add("mp-is-paused"),n.innerHTML=n.getAttribute("data-second-text"))),t.paused?e.ui.container.classList.remove("mp-is-playing"):e.ui.container.classList.add("mp-is-playing"),i&&(e.ui.currentTime.innerHTML=(0,a.sec2str)(t.currentTime)),r&&(e.ui.totalTime.innerHTML=(0,a.sec2str)(t.duration)),o&&(t.muted?(o.classList.add("mp-is-muted"),o.innerHTML=o.getAttribute("data-second-text")):(o.classList.remove("mp-is-muted"),o.innerHTML=o.getAttribute("data-first-text")))}},{key:"updateSizeOption",value:function(){var e=this.player.ui.container,t=(0,a.getMatchAttr)(e,"data-maxwidth-"),n=(0,a.getMatchAttr)(e,"data-minwidth-"),i=0;null!==t&&(i=parseInt(t.name),e.offsetWidth<=i?e.classList.add(t.value):e.classList.remove(t.value)),null!==n&&(i=parseInt(n.name),e.offsetWidth>=i?e.classList.add(n.value):e.classList.remove(n.value))}},{key:"active",value:function(){var e=this.player.ui.container;e.classList.remove("mp-is-active-focus"),e.classList.add("mp-is-active"),clearTimeout(e.activeTimer),e.activeTimer=setTimeout(function(){return e.classList.remove("mp-is-active")},2e3)}},{key:"activeFocus",value:function(){var e=this.player.ui.container;e.classList.remove("mp-is-active"),e.classList.add("mp-is-active-focus"),clearTimeout(e.activeTimer),e.activeTimer=setTimeout(function(){return e.classList.remove("mp-is-active-focus")},2e3)}},{key:"contextmenu",value:function(e){e.preventDefault(),this.player.opt.contextmenu&&this.player.ui.contextmenu.show(e),this.callback(e)}},{key:"keydown",value:function(e){var t=this.player;if(t.ui.container.classList.contains("mp-is-focus"))switch(e.keyCode){case 32:e.preventDefault(),t.togglePlay();break;case 70:t.ui.btnFullscreen&&this.FSButtonHandler.call(this);break;case 37:e.preventDefault(),t.currentTime-=5;break;case 39:e.preventDefault(),t.currentTime+=5;break;case 38:e.preventDefault(),t.volume+=.05;break;case 40:e.preventDefault(),t.volume-=.05}}},{key:"abort",value:function(e){this.callback(e)}},{key:"canplay",value:function(e){this.callback(e)}},{key:"canplaythrough",value:function(e){this.updateBuffered(),this.callback(e)}},{key:"durationchange",value:function(e){this.callback(e)}},{key:"emptied",value:function(e){this.callback(e)}},{key:"ended",value:function(e){this.callback(e)}},{key:"error",value:function(e){this.callback(e)}},{key:"loadeddata",value:function(e){this.updateBuffered(),this.callback(e)}},{key:"loadedmetadata",value:function(e){this.player.wrapper.applyPlayerOption(),this.updatePlayState(),this.updateSizeOption(),this.callback(e)}},{key:"loadstart",value:function(e){this.callback(e)}},{key:"pause",value:function(e){this.updatePlayState(),this.callback(e)}},{key:"play",value:function(){this.updatePlayState(),this.callback("play")}},{key:"playing",value:function(e){this.updateBuffered(),this.callback(e)}},{key:"progress",value:function(e){this.updateBuffered(),this.callback(e)}},{key:"ratechange",value:function(e){this.callback(e)}},{key:"seeked",value:function(e){var t=this;clearTimeout(this.player.ui.container.seekTimer),this.player.ui.container.seekTimer=setTimeout(function(){return t.player.ui.container.classList.remove("mp-is-seeking")},800),this.callback(e)}},{key:"seeking",value:function(e){this.player.ui.container.classList.add("mp-is-seeking"),this.callback(e)}},{key:"stalled",value:function(e){this.callback(e)}},{key:"suspend",value:function(e){this.callback(e)}},{key:"timeupdate",value:function(e){this.player.ui.progress.isDown===!1&&(this.player.ui.progress.position=this.player.el.currentTime/this.player.el.duration*100),this.updatePlayState(),this.callback(e)}},{key:"volumechange",value:function(e){this.player.ui.volume.position=this.player.el.muted?0:this.player.el.volume/1*100,this.updatePlayState(),this.callback(e)}},{key:"waiting",value:function(e){this.callback(e)}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(8),c=i(u),p=function(){function e(t){a(this,e),this.player=t}return l(e,[{key:"progressOnDrag",value:function(e){this.player.el.currentTime=this.player.el.duration/100*e}},{key:"volumeOnDrag",value:function(e){this.player.el.volume=e/100}},{key:"btnPlay",value:function(){this.player.play()}},{key:"btnPause",value:function(){this.player.pause()}},{key:"btnPlayPause",value:function(){this.player.togglePlay()}},{key:"btnStop",value:function(){this.player.stop()}},{key:"btnToggleMute",value:function(){this.player.toggleMute()}},{key:"volumeBar",value:function(){this.player.el.muted=!1}}]),e}(),f=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.uiEvents=new p(e),n}return o(t,e),l(t,[{key:"on",value:function(){var e=this.player,n=(e.el,e.ui);s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"on",this).call(this),n.progress&&(n.progress.onDrag=this.uiEvents.progressOnDrag.bind(this)),n.volume&&(n.volume.onDrag=this.uiEvents.volumeOnDrag.bind(this)),n.btnPlay&&n.btnPlay.addEventListener("click",this.uiEvents.btnPlay.bind(this),!1),n.btnPause&&n.btnPause.addEventListener("click",this.uiEvents.btnPause.bind(this),!1),n.btnPlayPause&&n.btnPlayPause.addEventListener("click",this.uiEvents.btnPlayPause.bind(this),!1),n.btnStop&&n.btnStop.addEventListener("click",this.uiEvents.btnStop.bind(this),!1),n.btnMute&&n.btnMute.addEventListener("click",this.uiEvents.btnToggleMute.bind(this),!1),n.volumeBar&&n.volumeBar.addEventListener("mousedown",this.uiEvents.volumeBar.bind(this),!1)}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(3),a="\n<style>\n.mplayer-context-menu { line-height: 1.2; font-family: 'Malgun Gothic', 'dotum', sans-serif; font-size: 12px; color: #fff; background: rgba(0,0,0,.85); outline: none; position: absolute; z-index: 99999999; }\n.mplayer-context-main { margin: 0; padding: 0; list-style: none; }\n.mplayer-context-sub { display: none; margin: 0; padding: 0; background: rgba(0,0,0,.85); list-style: none; border: 1px solid #000; position: absolute; top: 0; left: 100%; }\n.mplayer-context-dir-left .mplayer-context-sub { left: auto; right: 100%; }\n.mplayer-context-dir-top .mplayer-context-sub { top: auto; bottom: 0; }\n.mplayer-context-item { position: relative; }\n.mplayer-context-item:not(:first-child) > .mplayer-context-link { border-top: 1px solid rgba(255,255,255,.2); }\n.mplayer-context-item:hover > .mplayer-context-sub { display: block; }\n.mplayer-context-link { -webkit-box-sizing: border-box; box-sizing: border-box; display: block; min-width: 100px; max-width: 250px; padding: 8px 15px; color: #fff; text-decoration: none; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }\n.mplayer-context-link:hover,\n.mplayer-context-link:focus { background-color: rgba(255,255,255,.2); }\n.mplayer-context-sub .mplayer-context-link { min-width: auto; }\n</style>\n",s=function(){function e(t,n){return i(this,e),this.items=t,this.player=n,this.el=null,this.events=[],this.init(t),this}return r(e,[{key:"init",value:function(e){this.items=e,this.events=[],this.el=document.createElement("div"),this.el.setAttribute("class","mplayer-context-menu"),this.el.setAttribute("tabindex","0"),this.el.innerHTML="\n\t\t\t"+a+'\n\t\t\t<ul class="mplayer-context-main">'+this.createTree(this.items)+"</ul>\n\t\t",this.applyEvent()}},{key:"createTree",value:function(e){for(var t="",n=0,i=e.length;n<i;++n)this.events.push(e[n].action),t+='\n\t\t\t\t<li class="mplayer-context-item">\n\t\t\t\t\t<a href="#" class="mplayer-context-link" onclick="event.preventDefault();">'+e[n].title+"</a>\n\t\t\t\t\t"+(e[n].group?'<ul class="mplayer-context-sub">'+this.createTree(e[n].group)+"</ul>":"")+"\t\t\n\t\t\t\t</li>\n\t\t\t";return t}},{key:"applyEvent",value:function(){for(var e=this.el.querySelectorAll(".mplayer-context-link"),t=0,n=e.length;t<n;++t)e[t].addEventListener("click",this.events[t].bind(this.player),!1)}},{key:"show",value:function(e){this.hide(),window.addEventListener("click",this.hide,!1),window.addEventListener("contextmenu",this.hide,!1),window.addEventListener("resize",this.hide,!1),document.body.appendChild(this.el),this.position(e),this.el.focus()}},{key:"hide",value:function(e){if(e&&"contextmenu"===e.type&&(0,o.closest)(e.target,".mplayer"))return!1;for(var t=document.querySelectorAll(".mplayer-context-menu"),n=0,i=t.length;n<i;++n)document.body.removeChild(t[n]);window.removeEventListener("click",this.hide,!1),window.removeEventListener("contextmenu",this.hide,!1),window.removeEventListener("resize",this.hide,!1)}},{key:"position",value:function(e){var t=this.el,n=document.documentElement.clientWidth||document.body.clientWidth,i=document.documentElement.clientHeight||document.body.clientHeight,r=window.pageYOffset,o=window.pageXOffset,a=i-t.offsetHeight+r,s=n-t.offsetWidth+o,l=e.clientY+r,u=e.clientX+o;u>=s&&(this.el.classList.add("mplayer-context-dir-left"),u=s),l>=a&&(this.el.classList.add("mplayer-context-dir-top"),l=a),t.style.top=l+"px",t.style.left=u+"px"}}]),e}();t.default=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){
var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.el,r=t.onDrag,o=t.axis,a=void 0===o?"x":o;return n(this,e),this.range=i,this.dragger=this.range.children[0],this.onDrag=r,this.isX="x"===a,this.isDown=!1,this.range.addEventListener("mousedown",this.mousedown.bind(this)),document.addEventListener("mousemove",this.update.bind(this)),document.addEventListener("mouseup",this.mouseup.bind(this)),this.range.addEventListener("touchstart",this.mousedown.bind(this)),document.addEventListener("touchmove",this.update.bind(this)),document.addEventListener("touchend",this.mouseup.bind(this)),this}return i(e,[{key:"mousedown",value:function(e){e.preventDefault(),e.stopPropagation(),this.isDown=!0,this.update(e)}},{key:"update",value:function(e){var t=e.touches?this.isX?e.touches[0].pageX:e.touches[0].pageY:this.isX?e.pageX:e.pageY,n=t>=this.offsetPos&&t<=this.offsetPos+this.rangeSize,i=t-this.offsetPos,r=0;this.isDown&&n&&(r=this.isX?Math.round(i/this.rangeSize*100):Math.round((this.rangeSize-i)/this.rangeSize*100),this.position=r,"function"==typeof this.onDrag&&this.onDrag.call(this,this.position))}},{key:"mouseup",value:function(){this.isDown=!1}},{key:"position",get:function(){var e=this.isX?"width":"height";return Math.round(parseInt(this.dragger.style[e]))},set:function(e){var t=this.isX?"width":"height";this.dragger.style[t]=e+"%"}},{key:"rangeSize",get:function(){return this.isX?this.range.offsetWidth:this.range.offsetHeight}},{key:"offsetPos",get:function(){var e=this.range,t=0;if(e&&e.offsetParent)for(;e;)t+=this.isX?e.offsetLeft:e.offsetTop,e=e.offsetParent;return t}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=n(6),p=i(c),f=n(11),d=i(f),h=n(9),y=i(h),v=function(e){function t(e){var n;r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.player.events=new y.default(i.player),n=i,o(i,n)}return a(t,e),l(t,[{key:"createInterface",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createInterface",this).call(this,e);var n=this.player,i=(n.el,n.opt,n.ui.container),r=i.querySelector(".mp-progress"),o=i.querySelector(".mp-volume"),a=new d.default({el:r}),l=new d.default({el:o});n.ui=s(n.ui,{progressBar:r,buffered:r.querySelector(".mp-buffered"),volumeBar:o,progress:a,volume:l,currentTime:i.querySelector(".mp-current-time"),totalTime:i.querySelector(".mp-total-time"),btnPlay:i.querySelector(".mp-btn-play"),btnPause:i.querySelector(".mp-btn-pause"),btnPlayPause:i.querySelector(".mp-btn-play-puase"),btnStop:i.querySelector(".mp-btn-stop"),btnFullscreen:i.querySelector(".mp-btn-fullscreen"),btnMute:i.querySelector(".mp-btn-mute")})}}]),t}(p.default);t.default=v}]);